<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Example02:bcp02-ft</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="../dist/sensible.browser.min.js"></script>
    <script>
      async function sleep(time) {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve();
          }, time * 1000);
        });
      }

      async function main() {
        const network = "mainnet";
        const feeWif = "Kye4F7273jimXpoUrd4x4LUpMRHaGU4JdrStX3bLiWomZ9ztzUAq";

        const CoffeeShop = {
          wif: "L1Ljq1wKir7oJsTzHRq437JdDkmY9v8exFwm2jzytq7EdzunS71Q",
          address:
            network == "mainnet"
              ? "1FVyetCQrPdjNaG962bqYA5EL6q1JxNET3"
              : "mv1vwwHPfR4z9gjkobaDN5HZC6RiGva7QJ",
        };

        const Alice = {
          wif: "L1trJgTjf8s4gL5yYPWRiwDAXTJMwuC9QMRR98fSH8MF3xrjrQJA",
          address:
            network == "mainnet"
              ? "1KdUnX6RwzoL62iXD5iEs5osQjsGXrm3qf"
              : "mz9S5aBQm2Eas9C8vegch12CGjTySBb9Qh",
        };
        const Bob = {
          wif: "L1kr4PHhjyDHB3UdG8MBdaxDf4HzmUjygwF8rSTNmZW1q4F8uD3H",
          address:
            network == "mainnet"
              ? "1KmGCZcPBo7A4Q39sBb49X9stkk1gLwKbm"
              : "mzHDVchMzpYQqWWmakZRySNCkkLiZv73zQ",
        };

        const ft = new sensible.SensibleFT({
          network: network,
          purse: feeWif,
        });

        const opreturnData = {
          s: "sdfjsdkfjsdkfjdskfjkdsfjkdsjfkfdsjfkdsjfkdjsfjdsfjkdsjfksdfds",
          b: "sfsd",
          c: "sfds",
          e: {
            g: "1212",
            f: "sdfdsfsdfsdfdsfdsfdsf",
            a: "sdfsdfdsfsd",
            b: "ccccc",
            e:
              "sdfdsfdsjkfjdskfjkdsjfksdjfkdsjfkdsjfkdsjfkdsjfkjsdfdsfdsjkfjdskfjkdsjfksdjfkdsjfkdsjfkdsjfkdsjfkjsdfdsfdsjkfjdskfjkdsjfksdjfkdsjfkdsjfkdsjfkdsjfkjsdfdsfdsjkfjdskfjkdsjfksdjfkdsjfkdsjfkdsjfkdsjfkjsdfdsfdsjkfjdskfjkdsjfksdjfkdsjfkdsjfkdsjfkdsjfkjsdfdsfdsjkfjdskfjkdsjfksdjfkdsjfkdsjfkdsjfkdsjfkjsdfdsfdsjkfjdskfjkdsjfksdjfkdsjfkdsjfkdsjfkdsjfkjsdfdsfdsjkfjdskfjkdsjfksdjfkdsjfkdsjfkdsjfkdsjfkj",
          },
        };
        let fee = await ft.getGenesisEstimateFee({ opreturnData });
        let { txid, genesis, codehash, sensibleId, tx } = await ft.genesis({
          genesisWif: CoffeeShop.wif,
          tokenName: "COFFEE COIN",
          tokenSymbol: "CC",
          decimalNum: 8,
          noBroadcast: true,
          utxos: [
            {
              txId:
                "f527a1eb341fdc56018d64ec1fa74a3f59e1d04a22dcc395a8eb27c42f3d0515",
              outputIndex: 0,
              satoshis: fee,
              wif:
                "f527a1eb341fdc56018d64ec1fa74a3f59e1d04a22dcc395a8eb27c42f3d0515",
            },
          ],
          opreturnData,
        });
        console.log(`genesis success!
txid: ${txid}
genesis: ${genesis}
codehash: ${codehash}`);
        ft.dumpTx(tx);
      }

      main().catch((e) => console.error(e));
    </script>
  </head>
  <body></body>
</html>
